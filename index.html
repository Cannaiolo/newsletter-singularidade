<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guardi√µes da SINGULARIDADE ‚Äî Realidade Programada</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://cannaiolo.github.io/newsletter-singularidade" />
  <meta property="og:title" content="Guardi√µes da SINGULARIDADE ‚Äî Realidade Programada" />
  <meta property="og:description" content="As principais not√≠cias de IA, geopol√≠tica e inova√ß√£o em um s√≥ lugar." />
  <meta property="og:image" content="https://imgbox.com/0Sz1QYww" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(1rem); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.5s ease-out forwards;
    }

    @keyframes blink-fade {
      0%,20%   { background-color: rgba(253,224,71,1); }
      20%,40%  { background-color: rgba(253,224,71,0); }
      40%,60%  { background-color: rgba(253,224,71,1); }
      60%,80%  { background-color: rgba(253,224,71,0); }
      80%,100% { background-color: rgba(253,224,71,0); }
    }
    .animate-blink-fade {
      animation: blink-fade 5s ease-out forwards;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4">
  <div class="max-w-3xl mx-auto">
    <img src="https://images2.imgbox.com/43/dc/0Sz1QYww_o.png"
         alt="Logo Guardi√µes da Singularidade"
         class="mx-auto w-40 mb-6">

    <h1 id="page-title" class="text-3xl font-bold text-center mb-1">
      Guardi√µes da SINGULARIDADE ‚Äî Realidade Programada
    </h1>
    <p id="page-subtitle" class="text-center text-gray-600 text-lg mb-6">
      A news da sua Segunda-feira
    </p>

    <section id="sumario" class="mb-10">
      <h2 class="text-xl font-semibold mb-2">T√≥picos desta edi√ß√£o:</h2>
      <ul id="lista-sumario" class="list-disc pl-5 space-y-2"></ul>
    </section>

    <div id="noticias" class="space-y-10"></div>

    <div class="mt-10 p-4 bg-white rounded-2xl shadow text-center">
      <p class="text-xl font-semibold mb-2">
        ü•ã Novo ciclo aberto ‚Äî Intelig√™ncia Aumentada para executivos
      </p>
      <p class="text-gray-700 mb-2">
        11 vagas para quem quer comandar o jogo com IA ‚Äî n√£o ser comandado por ele.
      </p>
      <a href="https://www.canva.com/design/DAGqWdKBIM8/8TpHf9K3ATTbpTLfra3ZQA/view?utm_content=DAGqWdKBIM8&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=ha1f8fd8801"
         target="_blank"
         class="inline-block text-indigo-600 font-medium hover:underline py-2"
         aria-label="Torne-se um Guardi√£o da Singularidade">
        ‚Üí Torne-se um Guardi√£o da Singularidade
      </a>
    </div>
  </div>

  <script type="module">
    // Pega edi√ß√£o via query string: ?ed=2025-07-21_realidade-programada
    const params = new URLSearchParams(location.search);
    const edicao = params.get('ed') || '2025-07-21_realidade-programada';
    const titleMap = {
      '2025-07-14_entre_vozes_e_algoritmos': 'Entre vozes e algoritmos',
      '2025-07-21_realidade-programada': 'Realidade Programada'
    };

    import(`./editions/${edicao}.js`)
      .then(mod => {
        const data = mod.default;
        const tema = titleMap[edicao] || edicao;
        document.title = `Guardi√µes da SINGULARIDADE ‚Äî ${tema}`;
        document.getElementById('page-title').textContent =
          `Guardi√µes da SINGULARIDADE ‚Äî ${tema}`;
        renderNoticias(data);
      })
      .catch(err => {
        console.error("Falha ao carregar edi√ß√£o:", err);
        document.getElementById('noticias').innerHTML =
          '<p class="text-red-600">N√£o foi poss√≠vel carregar a edi√ß√£o solicitada.</p>';
      });

    function renderNoticias(data) {
      const sumarioEl = document.getElementById('lista-sumario');
      const noticiasEl = document.getElementById('noticias');
      sumarioEl.innerHTML = '';
      noticiasEl.innerHTML = '';

      data.blocos.forEach((noticia, i) => {
        const id = `noticia-${i}`;

        // Sum√°rio
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = `#${id}`;
        a.textContent = noticia.titulo;
        a.className = 'text-blue-600 hover:underline';
        a.setAttribute('aria-label', `Ir para ${noticia.titulo}`);
        li.appendChild(a);
        sumarioEl.appendChild(li);

        // Destacar card piscando e fade ao clicar
        a.addEventListener('click', e => {
          e.preventDefault();
          const card = document.getElementById(id);
          card.classList.remove('animate-blink-fade');
          void card.offsetWidth; // for√ßa reflow para reiniciar anima√ß√£o
          card.classList.add('animate-blink-fade');
          card.scrollIntoView({ behavior: 'smooth', block: 'start' });
          history.replaceState(null, '', `#${id}`);
        });

        // Card de not√≠cia
        const card = document.createElement('div');
        card.id = id;
        card.className =
          'bg-white rounded-2xl shadow p-4 transition-transform hover:scale-[1.02] opacity-0 animate-fade-in';
        card.innerHTML = `
          <h2 class="text-xl font-semibold mb-2">${noticia.titulo}</h2>
          <p class="text-gray-700 mb-2">${noticia.resumo}</p>
          <a href="${noticia.link}"
             target="_blank"
             class="inline-block text-indigo-600 font-medium hover:underline py-2"
             aria-label="Leia mais sobre ${noticia.titulo}">
            Leia mais ‚Üí
          </a>
        `;
        noticiasEl.appendChild(card);
      });
    }
  </script>
</body>
</html>
